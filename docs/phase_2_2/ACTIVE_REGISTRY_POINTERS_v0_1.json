{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "pointer_contract_version": "0.1",
  "description": "Active Registry Pointers — the ONLY mutable artifacts in the registry layer. Each pointer selects the currently active sealed artifact set for a given registry. Pointers are the sole mechanism for expressing 'active' state.",
  "mutation_policy": "Pointers are the ONLY mutable artifacts in Phase 2.2. All registry data is immutable. Updating a pointer does not modify any registry artifact — it changes only which artifact is selected as 'active'.",
  "last_updated_utc": "2026-02-05T01:56:05Z",
  "last_updated_phase": "2.2.1",
  "pointers": [
    {
      "registry_id": "run_registry",
      "active_ref": {
        "run_id": "2026-02-05__000138__run_registry_build",
        "run_root": ".codex/RUNS",
        "relpath": "RUN_REGISTRY_v0_1.jsonl",
        "manifest_sha256": "1c0fc2ca1e6989fb245affe2d424e70b7203fec014676ccfe3c55a9ecb642710"
      },
      "active_ref_known": true,
      "active_asof_utc": "2026-02-05T00:01:38Z",
      "notes": "Latest run_registry_build. Seal validated by validate_registry_seals_v0_1.py."
    },
    {
      "registry_id": "op_status_table",
      "active_ref": {
        "run_id": "2026-02-05__000144__op_status_table_build",
        "run_root": ".codex/RUNS",
        "relpath": "OPERATION_STATUS_TABLE_v0_1.json",
        "manifest_sha256": "152d3edbcc27de27ff8bd73b3327cee36415181b078d0a51c00a480db196254e"
      },
      "active_ref_known": true,
      "active_asof_utc": "2026-02-05T00:01:44Z",
      "notes": "Latest op_status_table_build. Phase 2.2.1: manifest_sha256 resolved from MANIFEST.sha256 ROOT_SHA256."
    },
    {
      "registry_id": "drift_signals",
      "active_ref": {
        "run_id": "2026-02-05__001255__drift_signals_build",
        "run_root": ".codex/RUNS",
        "relpath": "DRIFT_SIGNALS_v0_1.json",
        "manifest_sha256": "df8aa730735b2c61ebdbafef287fdd60ae18560fc1a79b03a76a0da4b5ebbd97"
      },
      "active_ref_known": true,
      "active_asof_utc": "2026-02-05T00:12:55Z",
      "notes": "Latest drift_signals_build. Phase 2.2.1: manifest_sha256 resolved from MANIFEST.sha256 ROOT_SHA256."
    },
    {
      "registry_id": "migration_ledger",
      "active_ref": {
        "run_id": "2026-02-05__015605__seal_migration_ledger",
        "run_root": ".codex/RUNS",
        "relpath": "applied_migrations_snapshot.json",
        "manifest_sha256": "746fe6b8c995768cfd428d0bdb694d98c1a176a728c014f93f0f3468e1266379"
      },
      "active_ref_known": true,
      "active_asof_utc": "2026-02-05T01:56:05Z",
      "notes": "Phase 2.2.1: Sealed snapshot of schema/applied_migrations.json. Source file preserved unmodified."
    },
    {
      "registry_id": "expected_versions",
      "active_ref": {
        "run_id": "2026-02-05__015605__seal_expected_versions",
        "run_root": ".codex/RUNS",
        "relpath": "EXPECTED_VERSIONS_v0_1_snapshot.json",
        "manifest_sha256": "89621b58271a6f3e0365e793a12fcb10d5cc00c6606b6d1538544d976f5d25d1"
      },
      "active_ref_known": true,
      "active_asof_utc": "2026-02-05T01:56:05Z",
      "notes": "Phase 2.2.1: Sealed snapshot of docs/governance/EXPECTED_VERSIONS_v0_1.json. Source file preserved unmodified."
    },
    {
      "registry_id": "threshold_packs_file",
      "active_ref": {
        "run_id": "2026-02-05__015605__seal_threshold_packs",
        "run_root": ".codex/RUNS",
        "relpath": null,
        "manifest_sha256": "b57a7ef3c4101db1533cacfe28a19c6d0a2c3e3699328cb45a9b56821e66791a"
      },
      "active_ref_known": true,
      "active_asof_utc": "2026-02-05T01:56:05Z",
      "notes": "Phase 2.2.1: Sealed snapshot of all 3 threshold pack files. relpath is null because the sealed artifact contains multiple files (c3_example_pack_v1.json, c3_regime_trend_v1.json, state_plane_v0_2_default_v1.json)."
    },
    {
      "registry_id": "threshold_registry_db",
      "active_ref": {
        "run_id": null,
        "run_root": null,
        "relpath": null,
        "manifest_sha256": null
      },
      "active_ref_known": "unknown",
      "active_asof_utc": "unknown",
      "notes": "NON-CLOSABLE: External database registry. Cannot verify or seal from repo evidence alone. Requires DB access to snapshot. Residual gap — justified."
    },
    {
      "registry_id": "validation_range_results",
      "active_ref": {
        "run_id": null,
        "run_root": null,
        "relpath": null,
        "manifest_sha256": null
      },
      "active_ref_known": "unknown",
      "active_asof_utc": "unknown",
      "notes": "NON-CLOSABLE: Multiple independent JSONL files (one per range run). No single 'active' artifact — consumers select by range_run_id. This is a collection registry, not a singleton. Residual gap — justified."
    },
    {
      "registry_id": "derived_validation_reports",
      "active_ref": {
        "run_id": "2026-02-05__015605__seal_derived_validation",
        "run_root": ".codex/RUNS",
        "relpath": "derived_validation_report.json",
        "manifest_sha256": "563db8ae7bf2be47443912145c4cb8fafaeccce4ad14ca877ee5382f403ade3d"
      },
      "active_ref_known": true,
      "active_asof_utc": "2026-02-05T01:56:05Z",
      "notes": "Phase 2.2.1: Sealed snapshot of artifacts/derived_validation/1dfb7850-2cdd-5dd0-9cd5-dd7758d19439/. LATEST.txt is now superseded by this pointer (backward-compatible but not authoritative)."
    },
    {
      "registry_id": "evidence_pack_registry",
      "active_ref": {
        "run_id": null,
        "run_root": null,
        "relpath": null,
        "manifest_sha256": null
      },
      "active_ref_known": "unknown",
      "active_asof_utc": "unknown",
      "notes": "NON-CLOSABLE: Multiple evidence packs exist, each individually sealed at run level. No single 'active' artifact — consumers select by run_id. This is a collection registry. Residual gap — justified."
    },
    {
      "registry_id": "fingerprint_index",
      "active_ref": {
        "run_id": "2026-02-05__015605__seal_fingerprint_index",
        "run_root": ".codex/RUNS",
        "relpath": "fingerprint_index_snapshot.csv",
        "manifest_sha256": "b3f7b41fe1d0f0f47a902d2e6e4803b3f78580061032e79922061d9b9353a807"
      },
      "active_ref_known": true,
      "active_asof_utc": "2026-02-05T01:56:05Z",
      "notes": "Phase 2.2.1: Sealed snapshot of reports/path1/trajectory_families/v0.1/fingerprints/index.csv. Source file preserved unmodified."
    },
    {
      "registry_id": "system_health_report",
      "active_ref": {
        "run_id": null,
        "run_root": null,
        "relpath": null,
        "manifest_sha256": null
      },
      "active_ref_known": "unknown",
      "active_asof_utc": "unknown",
      "notes": "NON-CLOSABLE: Presentation-only artifact. Multiple renders exist. No single 'active' selection needed — latest render is consumed for display. Residual gap — justified."
    }
  ],
  "pointer_schema": {
    "description": "Schema for each pointer entry in this file.",
    "required": ["registry_id", "active_ref", "active_ref_known", "active_asof_utc"],
    "properties": {
      "registry_id": {
        "type": "string",
        "description": "Must match a registry_id in REGISTRY_CATALOG_v0_1.json."
      },
      "active_ref": {
        "type": "object",
        "description": "Immutable reference to the sealed artifact.",
        "properties": {
          "run_id": { "type": ["string", "null"] },
          "run_root": { "type": ["string", "null"] },
          "relpath": { "type": ["string", "null"] },
          "manifest_sha256": { "type": ["string", "null"] }
        }
      },
      "active_ref_known": {
        "description": "Tri-state: true = pointer is valid and verified, false = pointer is invalid, 'unknown' = cannot determine from evidence.",
        "enum": [true, false, "unknown"]
      },
      "active_asof_utc": {
        "type": "string",
        "description": "ISO8601 UTC timestamp of when this pointer was set, or 'unknown'."
      },
      "notes": {
        "type": "string",
        "description": "Human-readable explanation of pointer state."
      }
    }
  }
}
